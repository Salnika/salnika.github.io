<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flowbit - Suivi d'habitudes intelligent</title>
    <script>
        function checkAndRedirect() {
    const appUrl = 'exp://u.expo.dev/08470710-02c1-4827-966a-be03b078f5ff/group/c7a26e9e-d06c-4d08-b5e9-af85391de765'; // Ton lien Expo

    const isAndroid = /android/i.test(navigator.userAgent);
    const storeUrl = isAndroid
        ? 'https://play.google.com/store/apps/details?id=host.exp.exponent' // Google Play Store pour Expo Go
        : 'https://apps.apple.com/us/app/expo-go/id982107779'; // Apple App Store pour Expo Go

    const TRIES_TIMEOUT = 2500; // Temps en millisecondes avant de considérer que l'app n'a pas ouvert
    const start = Date.now();

    const fallbackTimeout = setTimeout(function() {
        // Vérifie si suffisamment de temps s'est écoulé (au cas où le timeout se déclenche trop tôt)
        if (Date.now() - start < TRIES_TIMEOUT + 500) { // Ajoute une petite marge
             window.location.href = storeUrl;
        }
    }, TRIES_TIMEOUT);

    window.location.href = appUrl;

    window.addEventListener('blur', function() {
        clearTimeout(fallbackTimeout);
    });
    document.addEventListener('visibilitychange', function handleVisibilityChange() {
        if (document.hidden) {
            clearTimeout(fallbackTimeout);
            document.removeEventListener('visibilitychange', handleVisibilityChange);
        }
    });

}

window.onload = function() {
    setTimeout(checkAndRedirect, 500); // Attends 0.5 seconde avant de lancer la tentative
}

    </script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            text-align: center;
            background: #121212;
            color: white;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
        }

        h1 {
            font-size: 2.5em;
            color: #008CFF;
        }

        p {
            font-size: 1.2em;
            max-width: 600px;
            margin: 20px auto;
        }

        footer {
            margin-top: 40px;
            font-size: 0.9em;
            color: #888;
        }
    </style>
</head>
<body>
    <h1>Flowbit</h1>
    <p>L'application qui t'aide à suivre tes habitudes de manière intelligente et flexible.</p>
    <p>Si tu as Expo Go installé, tu seras redirigé vers l'app. Sinon, tu seras dirigé vers le store pour l'installer.</p>
</body>
</html>
